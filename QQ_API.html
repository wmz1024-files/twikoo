<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>QQ私有化部署文档 | Twikoo 中文文档</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Twikoo 中文文档">
    
    <link rel="preload" href="/assets/css/0.styles.bb1addce.css" as="style"><link rel="preload" href="/assets/js/app.e21f24e1.js" as="script"><link rel="preload" href="/assets/js/8.4f1544a8.js" as="script"><link rel="preload" href="/assets/js/2.ae0cc1b7.js" as="script"><link rel="preload" href="/assets/js/10.40620e0f.js" as="script"><link rel="prefetch" href="/assets/js/11.6c99d6e6.js"><link rel="prefetch" href="/assets/js/12.7a13416e.js"><link rel="prefetch" href="/assets/js/13.c62b5a83.js"><link rel="prefetch" href="/assets/js/14.06a2057d.js"><link rel="prefetch" href="/assets/js/15.89f7a856.js"><link rel="prefetch" href="/assets/js/3.ad7becd7.js"><link rel="prefetch" href="/assets/js/4.b647a668.js"><link rel="prefetch" href="/assets/js/5.e6aa8618.js"><link rel="prefetch" href="/assets/js/6.a1c82215.js"><link rel="prefetch" href="/assets/js/7.26efb331.js"><link rel="prefetch" href="/assets/js/9.4cb0e147.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bb1addce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Twikoo 中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/imaegoo/twikoo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/imaegoo/twikoo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/quick-start.html" class="sidebar-link">快速上手</a></li><li><a href="/faq.html" class="sidebar-link">常见问题</a></li><li><a href="/api.html" class="sidebar-link">API 文档</a></li><li><a href="/link.html" class="sidebar-link">相关文档</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="qq私有化部署文档"><a href="#qq私有化部署文档" class="header-anchor">#</a> QQ私有化部署文档</h1> <h2 id="_1-下载go-cq"><a href="#_1-下载go-cq" class="header-anchor">#</a> 1. 下载go-cq</h2> <p>前往<a href="https://github.com/Mrs4s/go-cqhttp" target="_blank" rel="noopener noreferrer">go-cqhttp release<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载对应系统版本。</p> <h2 id="_2-配置服务"><a href="#_2-配置服务" class="header-anchor">#</a> 2. 配置服务</h2> <p>解压</p> <blockquote><p>Windows下请使用自己熟悉的解压软件自行解压</p></blockquote> <blockquote><p>Linux下在命令行中输入tar -xzvf [文件名]
使用</p></blockquote> <p><strong>Windows 标准方法</strong></p> <p>双击，根据提示生成运行脚本go-cqhttp_*.exe</p> <p><code>[WARNING]: 尝试加载配置文件 config.yml 失败: 文件不存在 [INFO]: 默认配置文件已生成,请编辑 config.yml 后重启程序.</code></p> <p>配置文件请参考下方config.yml</p> <p>config.yml配置好后 再次双击运行脚本</p> <p><code>[INFO]: 登录成功 欢迎使用: balabala</code></p> <p>如出现需要认证的信息, 请自行认证设备。</p> <p>此时, 基础配置完成</p> <p><strong>Linux 标准方法</strong></p> <p>通过 SSH 连接到服务器</p> <p>cd到解压目录</p> <p>输入 , 运行 <code>./go-cqhttp</code></p> <p><code>[WARNING]: 尝试加载配置文件 config.yml 失败: 文件不存在 [INFO]: 默认配置文件已生成,请编辑 config.yml 后重启程序.</code></p> <p><strong>配置config.yml</strong></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>
<span class="token comment"># go-cqhttp 默认配置文件</span>

<span class="token key atrule">account</span><span class="token punctuation">:</span> <span class="token comment"># 账号相关</span>
  <span class="token key atrule">uin</span><span class="token punctuation">:</span>  <span class="token comment"># QQ账号</span>
  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">''</span> <span class="token comment"># 密码为空时使用扫码登录</span>
  <span class="token key atrule">encrypt</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># 是否开启密码加密</span>
  <span class="token key atrule">status</span><span class="token punctuation">:</span> <span class="token number">0</span>      <span class="token comment"># 在线状态 请参考 https://docs.go-cqhttp.org/guide/config.html#在线状态</span>
  <span class="token key atrule">relogin</span><span class="token punctuation">:</span> <span class="token comment"># 重连设置</span>
    <span class="token key atrule">delay</span><span class="token punctuation">:</span> <span class="token number">3</span>   <span class="token comment"># 首次重连延迟, 单位秒</span>
    <span class="token key atrule">interval</span><span class="token punctuation">:</span> <span class="token number">3</span>   <span class="token comment"># 重连间隔</span>
    <span class="token key atrule">max-times</span><span class="token punctuation">:</span> <span class="token number">0</span>  <span class="token comment"># 最大重连次数, 0为无限制</span>

  <span class="token comment"># 是否使用服务器下发的新地址进行重连</span>
  <span class="token comment"># 注意, 此设置可能导致在海外服务器上连接情况更差</span>
  <span class="token key atrule">use-sso-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">heartbeat</span><span class="token punctuation">:</span>
  <span class="token comment"># 心跳频率, 单位秒</span>
  <span class="token comment"># -1 为关闭心跳</span>
  <span class="token key atrule">interval</span><span class="token punctuation">:</span> <span class="token number">5</span>

<span class="token key atrule">message</span><span class="token punctuation">:</span>
  <span class="token comment"># 上报数据类型</span>
  <span class="token comment"># 可选: string,array</span>
  <span class="token key atrule">post-format</span><span class="token punctuation">:</span> string
  <span class="token comment"># 是否忽略无效的CQ码, 如果为假将原样发送</span>
  <span class="token key atrule">ignore-invalid-cqcode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># 是否强制分片发送消息</span>
  <span class="token comment"># 分片发送将会带来更快的速度</span>
  <span class="token comment"># 但是兼容性会有些问题</span>
  <span class="token key atrule">force-fragment</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># 是否将url分片发送</span>
  <span class="token key atrule">fix-url</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># 下载图片等请求网络代理</span>
  <span class="token key atrule">proxy-rewrite</span><span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token comment"># 是否上报自身消息</span>
  <span class="token key atrule">report-self-message</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># 移除服务端的Reply附带的At</span>
  <span class="token key atrule">remove-reply-at</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment"># 为Reply附加更多信息</span>
  <span class="token key atrule">extra-reply-data</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token key atrule">output</span><span class="token punctuation">:</span>
  <span class="token comment"># 日志等级 trace,debug,info,warn,error</span>
  <span class="token key atrule">log-level</span><span class="token punctuation">:</span> warn
  <span class="token comment"># 是否启用 DEBUG</span>
  <span class="token key atrule">debug</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 开启调试模式</span>

<span class="token comment"># 默认中间件锚点</span>
<span class="token key atrule">default-middlewares</span><span class="token punctuation">:</span> <span class="token important">&amp;default</span>
  <span class="token comment"># 访问密钥, 强烈推荐在公网的服务器设置</span>
  <span class="token key atrule">access-token</span><span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token comment"># 事件过滤器文件目录</span>
  <span class="token key atrule">filter</span><span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token comment"># API限速设置</span>
  <span class="token comment"># 该设置为全局生效</span>
  <span class="token comment"># 原 cqhttp 虽然启用了 rate_limit 后缀, 但是基本没插件适配</span>
  <span class="token comment"># 目前该限速设置为令牌桶算法, 请参考:</span>
  <span class="token comment"># https://baike.baidu.com/item/%E4%BB%A4%E7%89%8C%E6%A1%B6%E7%AE%97%E6%B3%95/6597000?fr=aladdin</span>
  <span class="token key atrule">rate-limit</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 是否启用限速</span>
    <span class="token key atrule">frequency</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token comment"># 令牌回复频率, 单位秒</span>
    <span class="token key atrule">bucket</span><span class="token punctuation">:</span> <span class="token number">1</span>     <span class="token comment"># 令牌桶大小</span>

<span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token comment"># 数据库相关设置</span>
  <span class="token key atrule">leveldb</span><span class="token punctuation">:</span>
    <span class="token comment"># 是否启用内置leveldb数据库</span>
    <span class="token comment"># 启用将会增加10-20MB的内存占用和一定的磁盘空间</span>
    <span class="token comment"># 关闭将无法使用 撤回 回复 get_msg 等上下文相关功能</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># 连接服务列表</span>
<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token comment"># 添加方式，同一连接方式可添加多个，具体配置说明请查看文档</span>
  <span class="token comment">#- http: # http 通信</span>
  <span class="token comment">#- ws:   # 正向 Websocket</span>
  <span class="token comment">#- ws-reverse: # 反向 Websocket</span>
  <span class="token comment">#- pprof: #性能分析服务器</span>
  <span class="token comment"># HTTP 通信设置</span>
  <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token comment"># 服务端监听地址</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
      <span class="token comment"># 服务端监听端口</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5700</span>
      <span class="token comment"># 反向HTTP超时时间, 单位秒</span>
      <span class="token comment"># 最小值为5，小于5将会忽略本项设置</span>
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">middlewares</span><span class="token punctuation">:</span>
        <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*default</span> <span class="token comment"># 引用默认中间件</span>
      <span class="token comment"># 反向HTTP POST地址列表</span>
      <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token comment">#- url: '' # 地址</span>
      <span class="token comment">#  secret: ''           # 密钥</span>
      <span class="token comment">#- url: 127.0.0.1:5701 # 地址</span>
      <span class="token comment">#  secret: ''          # 密钥</span>
 
      



</code></pre></div><p>再次运行<code>./go-cqhttp</code></p> <p><code>[INFO]: 登录成功 欢迎使用: balabala</code></p> <p>如出现需要认证的信息, 请自行认证设备。</p> <p>此时, 基础配置完成</p> <h2 id="注意-将你配置的端口号在防火墙里面放行或者使用反向代理将你设置的端口绑定到域名"><a href="#注意-将你配置的端口号在防火墙里面放行或者使用反向代理将你设置的端口绑定到域名" class="header-anchor">#</a> 注意:将你配置的端口号在防火墙里面放行或者使用反向代理将你设置的端口绑定到域名</h2> <h2 id="注意-公网使用一定要配置token"><a href="#注意-公网使用一定要配置token" class="header-anchor">#</a> 注意:公网使用一定要配置token</h2> <h2 id="_3-twikoo配置"><a href="#_3-twikoo配置" class="header-anchor">#</a> 3. twikoo配置</h2> <p>在twikoo中QQ私有化API配置项填写如下内容</p> <p>QQ号
<code>http://你的IP地址：端口号（或者域名）/send_private_msg?user_id=QQ号?token=你配置的token</code></p> <p>QQ群
<code>http://你的IP地址：端口号（或者域名）/send_group_msg?token=你配置的token?group_id=群号</code></p> <p>配置完成</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/imaegoo/twikoo/edit/main/docs/QQ_API.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/22/2022, 2:09:34 AM</span></div></footer> <!----> <div class="page-edit"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"> <script defer="defer" src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script> <script defer="defer" src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.1.8/css/lightgallery.css"> <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.1.8/lightgallery.min.js"></script> <div id="twikoo"></div> <script src="https://cdn.jsdelivr.net/npm/twikoo@1.5.4/dist/twikoo.all.min.js"></script></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e21f24e1.js" defer></script><script src="/assets/js/8.4f1544a8.js" defer></script><script src="/assets/js/2.ae0cc1b7.js" defer></script><script src="/assets/js/10.40620e0f.js" defer></script>
  </body>
</html>
