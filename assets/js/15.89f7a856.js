(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{433:function(t,e,a){"use strict";a.r(e);var r=a(62),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"快速上手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[t._v("#")]),t._v(" 快速上手")]),t._v(" "),a("p",[t._v("Twikoo 分为云函数和前端两部分，部署时请注意保持二者版本一致。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E4%BA%91%E5%87%BD%E6%95%B0%E9%83%A8%E7%BD%B2"}},[t._v("云函数部署")]),t._v("有 4 种方式，"),a("a",{attrs:{href:"#%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2"}},[t._v("一键部署")]),t._v("、"),a("a",{attrs:{href:"#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2"}},[t._v("手动部署")]),t._v("、"),a("a",{attrs:{href:"#%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%83%A8%E7%BD%B2"}},[t._v("命令行部署")]),t._v("和"),a("a",{attrs:{href:"#vercel-%E9%83%A8%E7%BD%B2"}},[t._v("Vercel 部署")]),t._v("。")]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2"}},[t._v("前端部署")]),t._v("有 2 种方式，如果您的网站主题支持 Twikoo，您只需在配置文件中指定 Twikoo 即可；如果您的网站主题不支持 Twikoo，您需要修改源码手动引入 Twikoo 的 js 文件并初始化之。")])]),t._v(" "),a("h2",{attrs:{id:"云函数部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云函数部署"}},[t._v("#")]),t._v(" 云函数部署")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("div",{staticStyle:{width:"6em"}},[t._v("部署方式")])]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"#%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2"}},[t._v("一键部署")])]),t._v(" "),a("td",[t._v("[ 不建议 ] 虽然方便，但是仅支持按量计费环境——也就是说，"),a("strong",[t._v("一键部署的环境，当免费资源用尽后，将会产生费用")]),t._v("。且按量计费环境无法切换为包年包月环境。免费额度数据库读操作数只有 500 次 / 天，"),a("strong",[t._v("无法支撑 Twikoo 的运行需求")]),t._v("。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2"}},[t._v("手动部署")])]),t._v(" "),a("td",[t._v("[ 建议 ] 手动部署到腾讯云云开发环境，在中国大陆访问速度较快。由于基础版 1 已从 0 元涨价至 6.9 元 / 月，需要付费购买环境才能部署。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"#%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%83%A8%E7%BD%B2"}},[t._v("命令行部署")])]),t._v(" "),a("td",[t._v("[ 不建议 ] 仅针对有 Node.js 经验的开发者。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"#vercel-%E9%83%A8%E7%BD%B2"}},[t._v("Vercel 部署")])]),t._v(" "),a("td",[t._v("[ 建议 ] 适用于想要免费部署的用户，在中国大陆访问速度较慢。")])])])]),t._v(" "),a("h3",{attrs:{id:"一键部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一键部署"}},[t._v("#")]),t._v(" 一键部署")]),t._v(" "),a("ol",[a("li",[t._v("点击以下按钮将 Twikoo 一键部署到云开发"),a("br"),t._v(" "),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&appUrl=https%3A%2F%2Fgithub.com%2Fimaegoo%2Ftwikoo&branch=main",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://main.qcloudimg.com/raw/67f5a389f1ac6f3b4d04c7256438e44f.svg",alt:"部署到云开发"}}),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-登录授权"),a("OutboundLink")],1),t._v("，启用“匿名登录”")]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/safety",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-安全配置"),a("OutboundLink")],1),t._v("，将网站域名添加到“WEB安全域名”")])]),t._v(" "),a("h3",{attrs:{id:"手动部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动部署"}},[t._v("#")]),t._v(" 手动部署")]),t._v(" "),a("p",[t._v("如果您打算部署到一个现有的云开发环境，请直接从第 3 步开始。")]),t._v(" "),a("ol",[a("li",[t._v("进入"),a("a",{attrs:{href:"https://curl.qcloud.com/KnnJtUom",target:"_blank",rel:"noopener noreferrer"}},[t._v("云开发CloudBase"),a("OutboundLink")],1),t._v("活动页面，滚动到“新用户专享”部分，选择适合的套餐，点击“立即购买”，按提示创建好环境。")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("ul",[a("li",[t._v("推荐创建上海环境。如选择广州环境，需要在 "),a("code",[t._v("twikoo.init()")]),t._v(" 时额外指定环境 "),a("code",[t._v('region: "ap-guangzhou"')])]),t._v(" "),a("li",[t._v("环境名称自由填写")]),t._v(" "),a("li",[t._v("推荐选择计费方式"),a("code",[t._v("包年包月")]),t._v("，套餐版本"),a("code",[t._v("基础版 1")]),t._v("，超出免费额度不会收费")]),t._v(" "),a("li",[t._v("如果提示选择“应用模板”，请选择“空模板”")])])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/",target:"_blank",rel:"noopener noreferrer"}},[t._v("云开发控制台"),a("OutboundLink")],1),a("br")]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-登录授权"),a("OutboundLink")],1),t._v("，启用“匿名登录”")]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/safety",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-安全配置"),a("OutboundLink")],1),t._v("，将网站域名添加到“WEB安全域名”")]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/scf/index",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-云函数"),a("OutboundLink")],1),t._v("，点击“新建云函数”")]),t._v(" "),a("li",[t._v("函数名称请填写："),a("code",[t._v("twikoo")]),t._v("，创建方式请选择："),a("code",[t._v("空白函数")]),t._v("，运行环境请选择："),a("code",[t._v("Nodejs 10.15")]),t._v("，函数内存请选择："),a("code",[t._v("128MB")]),t._v("，点击“下一步”")]),t._v(" "),a("li",[t._v("清空输入框中的示例代码，复制以下代码、粘贴到“函数代码”输入框中，点击“确定”")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'twikoo-func'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main\n")])])]),a("ol",{attrs:{start:"8"}},[a("li",[t._v('创建完成后，点击“twikoo"进入云函数详情页，进入“函数代码”标签，点击“文件 - 新建文件”，输入 '),a("code",[t._v("package.json")]),t._v("，回车")]),t._v(" "),a("li",[t._v("复制以下代码、粘贴到代码框中，点击“保存并安装依赖”")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"twikoo-func"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.5.4"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"命令行部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行部署"}},[t._v("#")]),t._v(" 命令行部署")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("ul",[a("li",[t._v("请确保您已经安装了 "),a("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("请将命令、代码中“您的环境id”替换为您自己的环境id")]),t._v(" "),a("li",[t._v("第 7 步会弹出浏览器要求授权，需在有图形界面的系统下进行")]),t._v(" "),a("li",[t._v("请勿在 Termux 下操作。虽然可以部署成功，但是使用时会报错 "),a("code",[t._v("[FUNCTIONS_EXECUTE_FAIL] Error: EACCES: permission denied, open '/var/user/index.js'")])])])]),t._v(" "),a("p",[t._v("如果您打算部署到一个现有的云开发环境，请直接从第 3 步开始。")]),t._v(" "),a("ol",[a("li",[t._v("进入"),a("a",{attrs:{href:"https://curl.qcloud.com/KnnJtUom",target:"_blank",rel:"noopener noreferrer"}},[t._v("云开发CloudBase"),a("OutboundLink")],1),t._v("活动页面，滚动到“新用户专享”部分，选择适合的套餐（一般 0 元套餐即可），点击“立即购买”，按提示创建好环境。")]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/",target:"_blank",rel:"noopener noreferrer"}},[t._v("云开发控制台"),a("OutboundLink")],1),a("br")]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-登录授权"),a("OutboundLink")],1),t._v("，启用“匿名登录”")]),t._v(" "),a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/safety",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-安全配置"),a("OutboundLink")],1),t._v("，将网站域名添加到“WEB安全域名”")]),t._v(" "),a("li",[t._v("克隆本仓库")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/imaegoo/twikoo.git "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或 git clone https://e.coding.net/imaegoo/twikoo/twikoo.git")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" twikoo\n")])])]),a("blockquote",[a("p",[t._v("如果您没有安装 Git，也可以从 "),a("a",{attrs:{href:"https://github.com/imaegoo/twikoo/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("Release"),a("OutboundLink")],1),t._v(" 页面下载最新的 Source code"),a("br"),t._v("\n如果您所在的地区访问 Github 速度慢，也可以尝试另一个仓库地址："),a("a",{attrs:{href:"https://imaegoo.coding.net/public/twikoo/twikoo/git",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://imaegoo.coding.net/public/twikoo/twikoo/git"),a("OutboundLink")],1)])]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[t._v("安装依赖项")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 已安装 yarn 可以跳过此步")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),a("ol",{attrs:{start:"7"}},[a("li",[t._v("授权云开发环境（此命令会弹出浏览器要求授权，需在有图形界面的系统下进行）")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" run login\n")])])]),a("ol",{attrs:{start:"8"}},[a("li",[t._v("自动部署")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" deploy -e 您的环境id\n")])])]),a("h3",{attrs:{id:"vercel-部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vercel-部署"}},[t._v("#")]),t._v(" Vercel 部署")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("Vercel 部署的环境需配合 1.4.0 以上版本的 twikoo.js 使用")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.bilibili.com/video/BV1Fh411e7ZH",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看视频教程"),a("OutboundLink")],1)]),t._v(" "),a("ol",[a("li",[t._v("申请 "),a("a",{attrs:{href:"https://www.mongodb.com/cloud/atlas/register",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB"),a("OutboundLink")],1),t._v(" 账号")]),t._v(" "),a("li",[t._v("创建免费 MongoDB 数据库，区域推荐选择 "),a("code",[t._v("AWS / N. Virginia (us-east-1)")])]),t._v(" "),a("li",[t._v("在 Clusters 页面点击 CONNECT，按步骤设置允许所有 IP 地址的连接（"),a("a",{attrs:{href:"https://vercel.com/support/articles/how-to-allowlist-deployment-ip-address",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么？"),a("OutboundLink")],1),t._v("），创建数据库用户，并记录数据库连接字符串，请将连接字符串中的 "),a("code",[t._v("<password>")]),t._v(" 修改为数据库密码")]),t._v(" "),a("li",[t._v("申请 "),a("a",{attrs:{href:"https://vercel.com/signup",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vercel"),a("OutboundLink")],1),t._v(" 账号")]),t._v(" "),a("li",[t._v("点击以下按钮将 Twikoo 一键部署到 Vercel"),a("br"),t._v(" "),a("a",{attrs:{href:"https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/main/src/vercel-min",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://vercel.com/button",alt:""}}),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("进入 Settings - Environment Variables，添加环境变量 "),a("code",[t._v("MONGODB_URI")]),t._v("，值为第 3 步的数据库连接字符串")]),t._v(" "),a("li",[t._v("进入 Overview，点击 Domains 下方的链接，如果环境配置正确，可以看到 “Twikoo 云函数运行正常” 的提示")]),t._v(" "),a("li",[t._v("Vercel Domains（包含 "),a("code",[t._v("https://")]),t._v(" 前缀，例如 "),a("code",[t._v("https://xxx.vercel.app")]),t._v("）即为您的环境 id")])]),t._v(" "),a("h2",{attrs:{id:"前端部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端部署"}},[t._v("#")]),t._v(" 前端部署")]),t._v(" "),a("h3",{attrs:{id:"在-hexo-中使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-中使用"}},[t._v("#")]),t._v(" 在 Hexo 中使用")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-butterfly-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-butterfly-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/jerryc127/hexo-theme-butterfly",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo Butterfly"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96",target:"_blank",rel:"noopener noreferrer"}},[t._v("Butterfly 安裝文檔(四) 主題配置-2"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-keep-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-keep-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/XPoet/hexo-theme-keep",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo Keep"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://github.com/XPoet/hexo-theme-keep/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-keep/_config.yml"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-volantis-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-volantis-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/volantis-x/hexo-theme-volantis",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo Volantis"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://github.com/volantis-x/hexo-theme-volantis/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-volantis/_config.yml"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-ayer-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-ayer-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/Shen-Yu/hexo-theme-ayer",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo Ayer"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://github.com/Shen-Yu/hexo-theme-ayer/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-ayer/_config.yml"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-next-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-next-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/next-theme/hexo-theme-next",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo NexT"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[a("strong",[t._v("暂不支持 NexT 8 以下的版本")]),t._v("，请先升级到 NexT 8。然后在 Hexo 项目根目录执行")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For NexT version >= 8.0.0 && < 8.4.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" hexo-next-twikoo@1.0.0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For NexT version >= 8.4.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" hexo-next-twikoo@1.0.3\n")])])]),a("p",[t._v("然后在配置中添加")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("twikoo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("visitor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("envId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xxxxxxxxxxxxxxx "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# region: ap-guangzhou # 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填")]),t._v("\n")])])]),a("h4",{attrs:{id:"在-hexo-matery-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-matery-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/blinkfox/hexo-theme-matery",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo Matery"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://github.com/blinkfox/hexo-theme-matery/blob/develop/_config.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-matery/_config.yml"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-icarus-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-icarus-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/ppoffice/hexo-theme-icarus",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo Icarus"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://www.anzifan.com/post/icarus_to_candy_2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("基于腾讯云，给你的 Icarus 博客配上 Twikoo 评论系统"),a("OutboundLink")],1),t._v(" by 异次元de机智君💯")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-mengd-萌典-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-mengd-萌典-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/lete114/hexo-theme-MengD",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo MengD(萌典)"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://github.com/lete114/hexo-theme-MengD/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-MengD/_config.yml"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-theme-fluid-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-theme-fluid-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/fluid-dev/hexo-theme-fluid",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-fluid"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://hexo.fluid-dev.com/docs/guide/#%E8%AF%84%E8%AE%BA",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置指南-评论"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-hexo-theme-cards-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-hexo-theme-cards-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/ChrAlpha/hexo-theme-cards",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-cards"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://github.com/ChrAlpha/hexo-theme-cards/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-theme-cards/_config.yml"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h4",{attrs:{id:"在-maupassant-hexo-主题使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-maupassant-hexo-主题使用"}},[t._v("#")]),t._v(" 在 "),a("a",{attrs:{href:"https://github.com/tufu9441/maupassant-hexo",target:"_blank",rel:"noopener noreferrer"}},[t._v("maupassant-hexo"),a("OutboundLink")],1),t._v(" 主题使用")]),t._v(" "),a("p",[t._v("请参考 "),a("a",{attrs:{href:"https://github.com/tufu9441/maupassant-hexo/blob/master/_config.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("maupassant-hexo/_config.yml"),a("OutboundLink")],1),t._v(" 进行配置")]),t._v(" "),a("h3",{attrs:{id:"通过-cdn-引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-cdn-引入"}},[t._v("#")]),t._v(" 通过 CDN 引入")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("如果您使用的博客主题不支持 Twikoo，并且您不知道如何引入 Twikoo，您可以"),a("a",{attrs:{href:"https://github.com/imaegoo/twikoo/issues/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("在 Github 提交适配请求"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tcomment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://cdn.jsdelivr.net/npm/twikoo@1.5.4/dist/twikoo.all.min.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}}),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\ntwikoo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("envId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'您的环境id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 腾讯云环境填 envId；Vercel 环境填地址（https://xxx.vercel.app）")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("el")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#tcomment'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 容器元素")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// region: 'ap-guangzhou', // 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// path: 'window.location.pathname', // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// lang: 'zh-CN', // 用于手动设定评论区语言，支持的语言列表 https://github.com/imaegoo/twikoo/blob/main/src/js/utils/i18n/index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("建议使用 CDN 引入 Twikoo 的用户在链接地址上锁定版本，以免将来 Twikoo 升级时受到非兼容性更新的影响。")])]),t._v(" "),a("h4",{attrs:{id:"爆米兔-cdn-镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#爆米兔-cdn-镜像"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://cdn.baomitu.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("爆米兔"),a("OutboundLink")],1),t._v(" CDN 镜像")]),t._v(" "),a("p",[t._v("请参考爆米兔前端静态资源库 "),a("a",{attrs:{href:"https://cdn.baomitu.com/twikoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.baomitu.com/twikoo"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("引入的 CDN 链接替换为如下即可："),a("code",[t._v("https://lib.baomitu.com/twikoo/1.5.4/twikoo.all.min.js")])]),t._v(" "),a("h2",{attrs:{id:"开启管理面板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启管理面板"}},[t._v("#")]),t._v(" 开启管理面板")]),t._v(" "),a("ol",[a("li",[t._v("进入"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/env/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-登录授权"),a("OutboundLink")],1),t._v("，点击“自定义登录”右边的“私钥下载”，下载私钥文件")]),t._v(" "),a("li",[t._v("用文本编辑器打开私钥文件，复制全部内容")]),t._v(" "),a("li",[t._v("点击评论窗口的“小齿轮”图标，粘贴私钥文件内容，并设置管理员密码")])]),t._v(" "),a("h2",{attrs:{id:"版本更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本更新"}},[t._v("#")]),t._v(" 版本更新")]),t._v(" "),a("p",[t._v("不同部署方式的更新方式也不同，请对号入座。更新部署成功后，请不要忘记同时更新前端的 Twikoo CDN 地址 "),a("code",[t._v("https://cdn.jsdelivr.net/npm/twikoo@x.x.x/dist/twikoo.all.min.js")]),t._v(" 中的 "),a("code",[t._v("x.x.x")]),t._v("，使之与云函数版本号相同，然后部署网站。")]),t._v(" "),a("h3",{attrs:{id:"针对一键部署的更新方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对一键部署的更新方式"}},[t._v("#")]),t._v(" 针对一键部署的更新方式")]),t._v(" "),a("p",[t._v("登录"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/apps/index",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-我的应用"),a("OutboundLink")],1),t._v("，输入")]),t._v(" "),a("ul",[a("li",[t._v("来源地址："),a("code",[t._v("https://github.com/imaegoo/twikoo/tree/main")])]),t._v(" "),a("li",[t._v("部署分支："),a("code",[t._v("main")])])]),t._v(" "),a("p",[t._v("应用目录无需填写，点击“确定”，部署完成。")]),t._v(" "),a("h3",{attrs:{id:"针对手动部署的更新方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对手动部署的更新方式"}},[t._v("#")]),t._v(" 针对手动部署的更新方式")]),t._v(" "),a("p",[t._v("登录"),a("a",{attrs:{href:"https://console.cloud.tencent.com/tcb/scf/index",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境-云函数"),a("OutboundLink")],1),t._v("，点击 twikoo，点击函数代码，打开 "),a("code",[t._v("package.json")]),t._v(" 文件，将 "),a("code",[t._v('"twikoo-func": "x.x.x"')]),t._v(" 其中的版本号修改为最新版本号，点击“保存并安装依赖”即可。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("如果您的云函数是 1.0.0 之前的版本，因为 1.0.0 版本修改了部署步骤，请先参考"),a("a",{attrs:{href:"#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2"}},[t._v("手动部署")]),t._v("，从第 5 步开始，重新创建云函数，再按照此步骤更新。")]),t._v(" "),a("p",[t._v("如果升级后出现无法读取评论列表，云函数报错，请在函数编辑页面，删除 "),a("code",[t._v("node_modules")]),t._v(" 目录（删除需要半分钟左右，请耐心等待删除完成），再点击保存并安装依赖。如果仍然不能解决，请删除并重新创建 Twikoo 云函数。")])]),t._v(" "),a("h3",{attrs:{id:"针对命令行部署的更新方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对命令行部署的更新方式"}},[t._v("#")]),t._v(" 针对命令行部署的更新方式")]),t._v(" "),a("p",[t._v("进入 Twikoo 源码目录，执行以下命令更新现有的云函数")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" deploy -e 您的环境id\n")])])]),a("h3",{attrs:{id:"针对-vercel-部署的更新方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对-vercel-部署的更新方式"}},[t._v("#")]),t._v(" 针对 Vercel 部署的更新方式")]),t._v(" "),a("ol",[a("li",[t._v("进入 "),a("a",{attrs:{href:"https://vercel.com/dashboard",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vercel 仪表板"),a("OutboundLink")],1),t._v(" - twikoo - Settings - Git")]),t._v(" "),a("li",[t._v("点击 Connected Git Repository 下方的仓库地址")]),t._v(" "),a("li",[t._v("打开 package.json，点击编辑")]),t._v(" "),a("li",[t._v("将 "),a("code",[t._v('"twikoo-vercel": "x.x.x"')]),t._v(" 其中的版本号修改为最新版本号。点击 Commit changes")]),t._v(" "),a("li",[t._v("部署会自动触发，可以回到 "),a("a",{attrs:{href:"https://vercel.com/dashboard",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vercel 仪表板"),a("OutboundLink")],1),t._v("，查看部署状态")])]),t._v(" "),a("h3",{attrs:{id:"自动更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动更新"}},[t._v("#")]),t._v(" 自动更新")]),t._v(" "),a("p",[t._v("考虑到可用性和安全性问题，Twikoo 没有实现自动更新，也没有计划实现自动更新。如果您希望实现自动更新，可以参考 MHuiG 基于 Github 工作流的 "),a("a",{attrs:{href:"https://github.com/MHuiG/twikoo-update",target:"_blank",rel:"noopener noreferrer"}},[t._v("twikoo-update"),a("OutboundLink")],1),t._v(" 的实现方式。")])])}),[],!1,null,null,null);e.default=s.exports}}]);